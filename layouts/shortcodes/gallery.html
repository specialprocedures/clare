<!-- PhotoSwipe CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@5.4.4/dist/photoswipe.css">

<!-- PhotoSwipe Gallery HTML -->
<div class="gallery-wrapper {{ with .Get " align" }}align-{{ . }}{{ end }}"
  style="display: flex; justify-content: flex-end;">
  <div class="image-gallery">
    {{- $dir := .Get 0 | default "images" -}}
    {{- $images := slice -}}
    {{- range (readDir (printf "static/%s" $dir)) -}}
    {{- if and (not .IsDir) (in (slice ".jpg" ".jpeg" ".png" ".gif" ".webp") (path.Ext .Name | lower)) -}}
    {{- $images = $images | append . -}}
    {{- end -}}
    {{- end -}}

    {{- range $index, $image := $images -}}
    <a href="/{{ $dir }}/{{ $image.Name }}" data-pswp-width="1200" data-pswp-height="800" target="_blank">
      <img src="/{{ $dir }}/{{ $image.Name }}" alt="Gallery image {{ $index }}">
    </a>
    {{- end -}}
  </div>

  <!-- PhotoSwipe JavaScript -->
  <script type="module">
    import PhotoSwipeLightbox from 'https://cdn.jsdelivr.net/npm/photoswipe@5.4.4/dist/photoswipe-lightbox.esm.js';

    const lightbox = new PhotoSwipeLightbox({
      gallery: '.image-gallery',
      children: 'a',
      pswpModule: () => import('https://cdn.jsdelivr.net/npm/photoswipe@5.4.4/dist/photoswipe.esm.js')
    });

    lightbox.init();
  </script>